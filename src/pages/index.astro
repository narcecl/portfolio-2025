---
import About from '@components/About.astro';
import Header from '@components/Header.astro';
import Hero from '@components/Hero.astro';
import Layout from '@layouts/Layout.astro';
import Projects from '@components/Projects.astro';
import Work from '@components/Work.astro';
---

<script is:inline>
	const trackSectionView = (sectionName) => {
		const config = {
			event: 'section_enter',
			name: sectionName,
		};

		dataLayer?.push(config);
	}

	document.addEventListener('DOMContentLoaded', () => {
		const sections = document.querySelectorAll('.section');

		const observerConfig = {
			rootMargin: "0px",
			threshold: 0.1,
		};

		const observer = new IntersectionObserver((entries) => {
			entries.forEach(entry => {
				if( entry.isIntersecting ) trackSectionView(entry.target.id);
			});
		}, observerConfig);

		sections.forEach(section => observer.observe(section));
	});
</script>

<Layout>
	<Header />
	<Hero class="section" id="hero" />
	<Work class="section" id="work" />
	<Projects class="section" id="projects" />
	<About class="section" id="about" />
</Layout>
